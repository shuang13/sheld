webpackJsonp([1],{"1N42":function(t,e){},"2Lmt":function(t,e){},"7QVd":function(t,e){},"A/MQ":function(t,e){},NHnr:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=n("7+uW"),r={render:function(){var t=this.$createElement,e=this._self._c||t;return e("div",{attrs:{id:"app"}},[e("router-view")],1)},staticRenderFns:[]};var a=n("VU/8")({name:"App"},r,!1,function(t){n("p92+")},null,null).exports,o=n("/ocq"),s={render:function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"index"},[this._m(0),this._v(" "),e("div",{staticClass:"content"},[e("div",{staticClass:"aside"},[e("Menu",{ref:"menu",staticStyle:{width:"160px","border-radius":"4px",float:"left","margin-right":"10px"},attrs:{theme:"dark","active-name":this.active}},[e("MenuItem",{attrs:{to:{path:"/Upload"},name:"1"}},[this._v("新建报告")]),this._v(" "),e("MenuItem",{attrs:{to:{path:"/Result"},name:"2"}},[this._v("报告列表")])],1)],1),this._v(" "),e("div",{staticClass:"content-right"},[e("div",{staticClass:"content-inner"},[e("router-view")],1)])])])},staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"header"},[e("p",[this._v("日常巡检")])])}]};var u=n("VU/8")({name:"Index",data:function(){return{active:"1"}},methods:{},mounted:function(){this.$route.query.id?this.active="2":this.$router.push({path:"/Upload"}).catch(function(t){})}},s,!1,function(t){n("1N42")},null,null).exports,l={name:"Upload",data:function(){var t=this;return{uploadModal:!1,remark:"",tableData:[{id:"",logReportId:"",costomer:"",equipmentCount:"",versionLog:"",logLinks:"",createTime:"",finishTime:"",category:"",resultContent:"",riskDiskNum:"",firmwareLink:"",$isEdit:!0}],pushData:[],th:[{title:"局点名",key:"costomer",width:170,render:function(t,e){return e.row.$isEdit?t("Input",{props:{type:"text",value:e.row.costomer},on:{input:function(t){e.row.costomer=t}}}):t("div",e.row.costomer)}},{title:"设备数",key:"equipmentCount",width:80,render:function(t,e){return e.row.$isEdit?t("Input",{props:{type:"text",value:e.row.equipmentCount},on:{input:function(t){e.row.equipmentCount=t}}}):t("div",e.row.equipmentCount)}},{title:"版本信息",key:"versionLog",render:function(t,e){return e.row.$isEdit?t("Input",{props:{type:"textarea",value:e.row.versionLog,autosize:!0},on:{input:function(t){e.row.versionLog=t}}}):t("pre",{style:{"white-space":"pre-wrap","word-wrap":"break-word"}},e.row.versionLog)}},{title:"日志链接",key:"logLinks",render:function(t,e){return e.row.$isEdit?t("Input",{props:{type:"textarea",value:e.row.logLinks,autosize:!0},style:{padding:"10px 0","white-space":"pre-line"},on:{input:function(t){e.row.logLinks=t}}}):t("pre",{style:{"white-space":"pre-wrap","word-wrap":"break-word"}},e.row.logLinks)}},{title:"类别",key:"category",width:120,render:function(e,n){return n.row.$isEdit?e("Select",{props:{value:n.row.category},on:{"on-change":function(t){n.row.category=t}}},t.categoryList.map(function(t){return[e("Option",{props:{value:t.value,key:t.value},style:{width:"80px"}},t.label)]})):e("div",t.categoryList[n.row.category-1].label)}},{title:"操作",key:"action",width:160,render:function(e,n){return[e("Button",{props:{type:"success",size:"small"},on:{click:function(){n.row.$isEdit?t.saveHandle(n.row):t.editHandle(n.row)}}},n.row.$isEdit?"保存":"编辑"),e("Button",{props:{type:"error",size:"small"},style:{margin:"0 0 0 10px"},on:{click:function(){1==t.tableData.length?t.$Message.info("表格不能为空！"):(t.tableData.splice(n.index,1),t.pushData.splice(n.index,1))}}},"删除")]}}],categoryList:[{value:"1",label:"金融"},{value:"2",label:"运营商"},{value:"3",label:"企业"},{value:"4",label:"其他"}]}},methods:{ok:function(){var t=this,e=new FormData;e.append("logSiteList",this.pushData),e.append("note",this.remark),this.$http.post(this.$api.report,e).then(function(e){"200"===e.code?(t.$Message.error("操作成功！"),t.$router.push({path:"/result"})):t.$Message.error("操作失败！")})},cancel:function(){this.$Message.info("Clicked cancel")},saveHandle:function(t){if(""==t.costomer||""==t.equipmentCount||""==t.versionLog||""==t.category||""==t.logLinks)return this.$Message.info("请完整填写信息！"),0;this.$set(t,"$isEdit",!1),this.tableData[t._index]=t,this.pushData[t._index]={id:t.id,logReportId:t.logReportId,costomer:t.costomer,equipmentCount:t.equipmentCount,versionLog:t.versionLog,logLinks:t.logLinks,createTime:t.createTime,finishTime:t.finishTime,category:t.category,resultContent:t.resultContent,riskDiskNum:t.riskDiskNum,firmwareLink:t.irmwareLink}},editHandle:function(t){this.$set(t,"$isEdit",!0)},uploadHandle:function(){this.tableData[this.tableData.length-1].$isEdit?this.$Message.info("请保存当前局点信息！"):(this.tableData.push({id:"",logReportId:"",costomer:"",equipmentCount:"",versionLog:"",logLinks:"",createTime:"",finishTime:"",category:"",resultContent:"",riskDiskNum:"",firmwareLink:"",$isEdit:!0}),this.pushData.push({id:"",logReportId:"",costomer:"",equipmentCount:"",versionLog:"",logLinks:"",createTime:"",finishTime:"",category:"",resultContent:"",riskDiskNum:"",firmwareLink:""}))},submitHandle:function(){this.tableData[this.tableData.length-1].$isEdit?this.$Message.info("请保存当前局点信息！"):this.uploadModal=!0}},mounted:function(){}},c={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"upload"},[n("div",{staticClass:"inner-header"},[n("Button",{attrs:{type:"info"},on:{click:t.uploadHandle}},[t._v("新建局点")]),t._v(" "),n("Button",{attrs:{type:"error"},on:{click:t.submitHandle}},[t._v("提交所有局点")]),t._v(" "),n("Modal",{attrs:{width:"360",title:"上传报告"},on:{"on-ok":t.ok,"on-cancel":t.cancel},model:{value:t.uploadModal,callback:function(e){t.uploadModal=e},expression:"uploadModal"}},[n("Form",{attrs:{"label-width":80}},[n("FormItem",{attrs:{label:"备注说明"}},[n("Input",{attrs:{type:"textarea",placeholder:"Enter something..."},model:{value:t.remark,callback:function(e){t.remark=e},expression:"remark"}})],1)],1)],1)],1),t._v(" "),n("Table",{ref:"table",staticStyle:{overflow:"visible"},attrs:{height:"600",columns:t.th,data:t.tableData}})],1)},staticRenderFns:[]};var d=n("VU/8")(l,c,!1,function(t){n("b+du")},"data-v-1d41a77c",null).exports,p={name:"Result",data:function(){var t=this;return{tableData:[{id:1,setCount:2,owner:"张",state:"已完成"}],currentRow:[],reportId:[],th:[{type:"selection",width:35,align:"center"},{title:"报告ID",key:"id"},{title:"局点数",key:"setCount"},{title:"提交人",key:"owner"},{title:"创建时间",key:"createTime"},{title:"完成时间",key:"finishTime"},{title:"阶段",key:"state"},{title:"备注",key:"note"},{title:"详情",key:"detail",render:function(e,n){return[e("Button",{props:{type:"warning",size:"small"},on:{click:function(){var e=n.row.id,i=t.$router.resolve({path:"/detail",query:{id:e}}).href;window.open(i,"_blank")}}},"详情"),e("Button",{props:{type:"error",size:"small"},style:{margin:"0 0 0 10px"},on:{click:function(){var e=n.row.id;t.deleteHandel(e)}}},"删除")]}}]}},methods:{handleRowChange:function(t){this.currentRow=t},deleteAllHandle:function(){var t=this;this.currentRow.forEach(function(e,n){t.reportId.push(e.id)}),this.$http.delete(this.$api.report,{reportId:this.reportId}).then(function(e){"200"===e.code&&(t.tableData=[],t.reportId=[],t.getData(),t.$Message.error("操作成功！"))})},deleteHandel:function(t){var e=this;this.$http.delete(this.$api.report,{reportId:t}).then(function(t){"200"===t.code&&(e.tableData=[],e.getData(),e.$Message.error("操作成功！"))})},getData:function(){var t=this;this.$http.get(this.$api.reportList).then(function(e){"200"===e.code&&e.data.forEach(function(e){t.tableData.push({id:e.id,setCount:e.setCount,owner:e.owner,createTime:e.createTime,finishTime:e.finishTime,state:e.state,note:e.note})})})}},mounted:function(){this.getData()}},h={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"result"},[n("h3",[t._v("报告列表")]),t._v(" "),n("div",{staticClass:"inner-header"},[n("Button",{attrs:{type:"error"},on:{click:t.deleteAllHandle}},[t._v("批量删除")])],1),t._v(" "),n("Table",{ref:"table",attrs:{height:"630",columns:t.th,data:t.tableData},on:{"on-selection-change":t.handleRowChange}})],1)},staticRenderFns:[]};var f=n("VU/8")(p,h,!1,function(t){n("2Lmt")},"data-v-3587d3c9",null).exports,m={name:"Result",data:function(){return{tableData:[{customer:"广电",equipmentCount:2}],th:[{title:"局点名",key:"customer",width:120},{title:"设备数",key:"equipmentCount",width:80},{title:"版本信息",key:"versionLog"},{title:"风险盘",key:"riskDiskNum",width:80,render:function(t,e){return t("div",e.row.riskDiskNum+" pcs")}},{title:"已知问题",key:"resultContent",render:function(t,e){return t("pre",{style:{"white-space":"pre-wrap","word-wrap":"break-word"}},e.row.resultContent)}},{title:"FW链接",key:"firmwareLink",render:function(t,e){return t("a",{attrs:{href:e.row.firmwareLink}},e.row.firmwareLink)}},{title:"日志链接",key:"logLinks",render:function(t,e){return t("pre",{style:{"white-space":"pre-wrap","word-wrap":"break-word"}},e.row.logLinks)}},{title:"类别",key:"category",width:80}]}},methods:{getData:function(){var t=this,e=new FormData;e.append("logReportId",this.$route.query.id),this.$http.post(this.$api.showReport,e).then(function(e){"200"===e.code?e.data.forEach(function(e){t.tableData.push({customer:e.customer,equipmentCount:e.equipmentCount,versionLog:e.versionLog,riskDiskNum:e.riskDiskNum,resultContent:e.resultContent,firmwareLink:e.firmwareLink,logLinks:e.logLinks,category:e.category})}):t.$Message.error("操作失败！")})}},mounted:function(){this.getData()}},w={render:function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"detail"},[e("h3",[this._v("报告详情(ID:"+this._s(this.$route.query.id)+")")]),this._v(" "),e("Table",{ref:"table",attrs:{height:"630",columns:this.th,data:this.tableData}})],1)},staticRenderFns:[]};var v=n("VU/8")(m,w,!1,function(t){n("A/MQ")},"data-v-02db4495",null).exports;i.default.use(o.a);var g=new o.a({routes:[{path:"/",name:"Index",component:u,children:[{path:"/upload",name:"Upload",component:d},{path:"/result",name:"Result",component:f},{path:"/detail",name:"Detail",component:v}]}]}),k=n("b3L9"),y=n.n(k),b=(n("7QVd"),n("//Fk")),$=n.n(b),L=n("mtWM"),C=n.n(L);i.default.prototype.$message=k.Message;new i.default;C.a.defaults.baseURL="",C.a.defaults.withCredentials=!0,C.a.defaults.headers.post["Content-Type"]="multipart/form-data",C.a.defaults.timeout=15e3;var D={post:function(t,e){return new $.a(function(n,i){C.a.post(t,e).then(function(t){return n(t.data)}).catch(function(t){return i(t)})})},get:function(t,e){return new $.a(function(n,i){C.a.get(t,{params:e}).then(function(t){return n(t.data)}).catch(function(t){return i(t)})})},delete:function(t,e){return new $.a(function(n,i){C.a.delete(t,{params:e}).then(function(t){return n(t.data)}).catch(function(t){return i(t)})})}};i.default.use(o.a),i.default.use(y.a),i.default.prototype.$http=D,i.default.prototype.$api={report:"/shield/report",reportList:"/shield/reportList",showReport:"/shield/showReport"},i.default.config.productionTip=!1,new i.default({el:"#app",router:g,components:{App:a},template:"<App/>"})},"b+du":function(t,e){},"p92+":function(t,e){}},["NHnr"]);
//# sourceMappingURL=app.2e5387b0d114f65b88ab.js.map